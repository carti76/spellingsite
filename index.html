<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spelling Practice</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            animation: fadeIn 0.8s ease-out;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .main-card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            animation: slideUp 0.6s ease-out;
        }

        .tab-container {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .tab {
            padding: 12px 24px;
            border: none;
            background: #f0f0f0;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .tab:hover {
            background: #e0e0e0;
            transform: translateY(-2px);
        }

        .tab.active {
            background: #2a5298;
            color: white;
        }

        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
            animation: fadeIn 0.4s ease-out;
        }

        .mode-selector {
            margin-bottom: 20px;
            text-align: center;
        }

        .mode-btn {
            padding: 10px 20px;
            margin: 5px;
            background: #f0f0f0;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .mode-btn.active {
            background: #2a5298;
            color: white;
            border-color: #2a5298;
        }

        .word-category {
            margin-bottom: 20px;
        }

        .category-btn {
            display: inline-block;
            margin: 5px;
            padding: 10px 20px;
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .category-btn:hover {
            border-color: #2a5298;
            background: #e7f1ff;
            transform: scale(1.05);
        }

        .category-btn.selected {
            background: #2a5298;
            color: white;
            border-color: #2a5298;
        }

        .practice-area {
            text-align: center;
            padding: 30px 0;
        }

        .audio-controls {
            margin-bottom: 30px;
        }

        .play-btn {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            color: white;
            font-size: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .play-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.6);
        }

        .play-btn:active {
            transform: scale(0.95);
        }

        .speed-control {
            margin-top: 15px;
        }

        .speed-control label {
            margin-right: 10px;
        }

        .speed-slider {
            width: 200px;
            vertical-align: middle;
        }

        .spelling-input {
            font-size: 24px;
            padding: 15px 25px;
            border: 3px solid #ddd;
            border-radius: 10px;
            width: 100%;
            max-width: 400px;
            text-align: center;
            transition: border-color 0.3s ease;
        }

        .sentence-input {
            max-width: 600px;
            text-align: left;
        }

        .spelling-input:focus {
            outline: none;
            border-color: #2a5298;
        }

        .button-group {
            margin-top: 20px;
            display: flex;
            gap: 10px;
            justify-content: center;
        }

        .submit-btn, .skip-btn {
            padding: 15px 40px;
            font-size: 18px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .submit-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .skip-btn {
            background: #6c757d;
            color: white;
        }

        .submit-btn:hover, .skip-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .feedback {
            margin-top: 30px;
            padding: 20px;
            border-radius: 10px;
            animation: fadeIn 0.5s ease-out;
        }

        .feedback.correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .letter-comparison {
            font-size: 24px;
            font-family: monospace;
            margin: 15px 0;
            letter-spacing: 3px;
        }

        .letter-correct {
            color: #28a745;
            font-weight: bold;
        }

        .letter-incorrect {
            color: #dc3545;
            font-weight: bold;
            text-decoration: underline;
        }

        .letter-missing {
            color: #ffc107;
            font-weight: bold;
        }

        .word-info {
            margin-top: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            text-align: left;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stat-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #2a5298;
        }

        .custom-list-area {
            margin-top: 20px;
        }

        .custom-textarea {
            width: 100%;
            min-height: 150px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            resize: vertical;
        }

        .action-btn {
            margin-top: 15px;
            padding: 12px 25px;
            background: #28a745;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s ease;
        }

        .action-btn:hover {
            background: #218838;
        }

        .daily-challenge {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 20px;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .daily-challenge:hover {
            transform: scale(1.02);
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @media (max-width: 600px) {
            .header h1 {
                font-size: 2em;
            }
            
            .tab {
                font-size: 14px;
                padding: 10px 20px;
            }
            
            .spelling-input {
                font-size: 20px;
            }

            .button-group {
                flex-direction: column;
            }

            .submit-btn, .skip-btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Spelling Practice</h1>
            <p>Master your spelling with interactive practice</p>
        </div>

        <div class="main-card">
            <div class="tab-container">
                <button class="tab active" onclick="showSection('practice')">Practice</button>
                <button class="tab" onclick="showSection('progress')">Progress</button>
                <button class="tab" onclick="showSection('custom')">Custom Lists</button>
            </div>

            <div id="practice-section" class="content-section active">
                <div class="daily-challenge" onclick="startDailyChallenge()">
                    <h3>üéØ Daily Challenge</h3>
                    <p>Test yourself with 10 random words!</p>
                </div>

                <div class="mode-selector">
                    <button class="mode-btn active" onclick="setMode('word')">Word Mode</button>
                    <button class="mode-btn" onclick="setMode('sentence')">Sentence Mode</button>
                </div>

                <div id="word-mode-content">
                    <div class="word-category">
                        <h3>Choose a category:</h3>
                        <button class="category-btn" onclick="selectCategory('common')">Common Words</button>
                        <button class="category-btn" onclick="selectCategory('intermediate')">Intermediate</button>
                        <button class="category-btn" onclick="selectCategory('advanced')">Advanced</button>
                        <button class="category-btn" onclick="selectCategory('business')">Business</button>
                        <button class="category-btn" onclick="selectCategory('science')">Science</button>
                    </div>
                </div>

                <div id="sentence-mode-content" style="display: none;">
                    <div class="word-category">
                        <h3>Choose sentence difficulty:</h3>
                        <button class="category-btn" onclick="selectSentenceLevel('easy')">Easy</button>
                        <button class="category-btn" onclick="selectSentenceLevel('medium')">Medium</button>
                        <button class="category-btn" onclick="selectSentenceLevel('hard')">Hard</button>
                    </div>
                </div>

                <div class="practice-area" id="practice-area" style="display: none;">
                    <div class="audio-controls">
                        <button class="play-btn" onclick="playWord()">‚ñ∂Ô∏è</button>
                        <div class="speed-control">
                            <label for="speed">Speed:</label>
                            <input type="range" id="speed" class="speed-slider" min="0.5" max="1.5" step="0.1" value="1">
                            <span id="speed-value">1.0x</span>
                        </div>
                    </div>

                    <input type="text" class="spelling-input" id="spelling-input" placeholder="Type here..." onkeypress="if(event.key==='Enter') checkSpelling()">
                    <br>
                    <div class="button-group">
                        <button class="submit-btn" onclick="checkSpelling()">Submit</button>
                        <button class="skip-btn" onclick="skipWord()">Skip</button>
                    </div>

                    <div id="feedback"></div>
                    <div id="word-info"></div>
                </div>
            </div>

            <div id="progress-section" class="content-section">
                <h2>Your Progress</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number" id="total-words">0</div>
                        <div>Words Practiced</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="accuracy">0%</div>
                        <div>Accuracy</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="streak">0</div>
                        <div>Day Streak</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="mastered">0</div>
                        <div>Words Mastered</div>
                    </div>
                </div>
            </div>

            <div id="custom-section" class="content-section">
                <h2>Custom Word Lists</h2>
                <p>Add your own words to practice. Enter one word per line or paste from a document.</p>
                <div class="custom-list-area">
                    <textarea class="custom-textarea" id="custom-words" placeholder="Enter words here...
accommodate
necessary
embarrass"></textarea>
                    <button class="action-btn" onclick="saveCustomList()">Save & Practice</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Expanded word lists
        const wordLists = {
            common: [
                { word: 'necessary', definition: 'needed or required', hint: 'one c, two s' },
                { word: 'accommodate', definition: 'to provide lodging or adapt to', hint: 'double c, double m' },
                { word: 'embarrass', definition: 'to cause discomfort or shame', hint: 'double r, double s' },
                { word: 'occurrence', definition: 'an instance or event', hint: 'double c, double r' },
                { word: 'definitely', definition: 'without doubt', hint: 'finite in the middle' },
                { word: 'separate', definition: 'to divide or disconnect', hint: 'a-rat-e' },
                { word: 'believe', definition: 'to accept as true', hint: 'i before e' },
                { word: 'receive', definition: 'to get or accept', hint: 'i before e, except after c' },
                { word: 'weird', definition: 'strange or unusual', hint: 'e before i' },
                { word: 'calendar', definition: 'system for organizing days', hint: 'ends with -ar' },
                { word: 'tomorrow', definition: 'the day after today', hint: 'double r, single m' },
                { word: 'beginning', definition: 'the start', hint: 'double n' },
                { word: 'environment', definition: 'surroundings', hint: 'n before m' },
                { word: 'government', definition: 'ruling authority', hint: 'n before m' },
                { word: 'committee', definition: 'group with a purpose', hint: 'double m, double t, double e' },
                { word: 'immediately', definition: 'at once', hint: 'double m' },
                { word: 'knowledge', definition: 'information possessed', hint: 'starts with kn' },
                { word: 'business', definition: 'commercial activity', hint: 'i in the middle' },
                { word: 'achieve', definition: 'to accomplish', hint: 'i before e' },
                { word: 'through', definition: 'from one side to another', hint: 'ough' },
                { word: 'experience', definition: 'practical knowledge', hint: 'ence ending' },
                { word: 'argument', definition: 'disagreement or reasoning', hint: 'no e after u' },
                { word: 'exercise', definition: 'physical activity', hint: 'c not s in middle' },
                { word: 'surprise', definition: 'unexpected event', hint: 'sur not ser' },
                { word: 'restaurant', definition: 'eating establishment', hint: 'au in middle' }
            ],
            intermediate: [
                { word: 'conscience', definition: 'moral sense of right and wrong', hint: 'science with con-' },
                { word: 'millennium', definition: 'period of 1000 years', hint: 'double l, double n' },
                { word: 'harassment', definition: 'aggressive pressure', hint: 'one r, double s' },
                { word: 'maintenance', definition: 'keeping in good condition', hint: 'maintain + ance' },
                { word: 'privilege', definition: 'special advantage', hint: 'i before e' },
                { word: 'cemetery', definition: 'burial ground', hint: 'all e\'s' },
                { word: 'rhythm', definition: 'pattern of beats', hint: 'no vowels except y' },
                { word: 'vacuum', definition: 'empty space', hint: 'double u' },
                { word: 'bureaucracy', definition: 'system of administration', hint: 'eau in the middle' },
                { word: 'miscellaneous', definition: 'various types mixed', hint: 'double l' },
                { word: 'exaggerate', definition: 'to overstate', hint: 'double g' },
                { word: 'hierarchy', definition: 'system of ranks', hint: 'i before e' },
                { word: 'mischievous', definition: 'playfully annoying', hint: 'i before e, no i after v' },
                { word: 'parallel', definition: 'side by side', hint: 'double l, then single l' },
                { word: 'perseverance', definition: 'continued effort', hint: 'e after s and v' },
                { word: 'questionnaire', definition: 'list of questions', hint: 'double n, aire ending' },
                { word: 'renaissance', definition: 'cultural rebirth', hint: 'ai, double s' },
                { word: 'silhouette', definition: 'dark outline', hint: 'h after l, ette ending' },
                { word: 'threshold', definition: 'entrance or limit', hint: 'single h in middle' },
                { word: 'unanimous', definition: 'all in agreement', hint: 'ani in middle' },
                { word: 'vengeance', definition: 'revenge', hint: 'gea in middle' },
                { word: 'Wednesday', definition: 'middle of the week', hint: 'silent d' },
                { word: 'xylophone', definition: 'musical instrument', hint: 'xy at start' },
                { word: 'yacht', definition: 'luxury boat', hint: 'ch after a' },
                { word: 'zealous', definition: 'very enthusiastic', hint: 'ea after z' }
            ],
            advanced: [
                { word: 'idiosyncrasy', definition: 'peculiar characteristic', hint: 'syn in the middle' },
                { word: 'onomatopoeia', definition: 'word that sounds like its meaning', hint: 'four vowels in a row' },
                { word: 'pharaoh', definition: 'ancient Egyptian ruler', hint: 'aoh ending' },
                { word: 'reconnaissance', definition: 'military observation', hint: 'double n, double s' },
                { word: 'bourgeois', definition: 'middle class', hint: 'French origin' },
                { word: 'entrepreneur', definition: 'business starter', hint: 'eur ending' },
                { word: 'lieutenant', definition: 'military rank', hint: 'lieu-tenant' },
                { word: 'psychiatrist', definition: 'mental health doctor', hint: 'psy- beginning' },
                { word: 'conscientious', definition: 'careful and thorough', hint: 'science in the middle' },
                { word: 'acquiesce', definition: 'to accept reluctantly', hint: 'acq- beginning' },
                { word: 'anachronism', definition: 'thing from wrong time period', hint: 'chr in middle' },
                { word: 'bourgeoisie', definition: 'middle class collectively', hint: 'geoi in middle' },
                { word: 'cantankerous', definition: 'bad-tempered', hint: 'ank in middle' },
                { word: 'denouement', definition: 'final resolution', hint: 'French origin, ou' },
                { word: 'effervescent', definition: 'bubbly', hint: 'double f, sc' },
                { word: 'facetious', definition: 'treating serious inappropriately', hint: 'all vowels in order' },
                { word: 'grandiloquent', definition: 'pompous in speech', hint: 'eloquent with grand' },
                { word: 'hors d\'oeuvre', definition: 'appetizer', hint: 'French, silent letters' },
                { word: 'infinitesimal', definition: 'extremely small', hint: 'esimal ending' },
                { word: 'juxtaposition', definition: 'placed side by side', hint: 'juxta at start' },
                { word: 'kaleidoscope', definition: 'colorful changing patterns', hint: 'ei after l' },
                { word: 'labyrinthine', definition: 'maze-like', hint: 'y after b' },
                { word: 'magnanimous', definition: 'generous in spirit', hint: 'anim in middle' },
                { word: 'nonchalant', definition: 'casually calm', hint: 'ch after non' },
                { word: 'obsequious', definition: 'overly obedient', hint: 'seq in middle' }
            ],
            business: [
                { word: 'liaison', definition: 'communication link', hint: 'two i\'s' },
                { word: 'entrepreneur', definition: 'business founder', hint: 'eur ending' },
                { word: 'gauge', definition: 'to measure', hint: 'au in middle' },
                { word: 'negotiate', definition: 'discuss to reach agreement', hint: 'ti not ci' },
                { word: 'remuneration', definition: 'payment for work', hint: 'mun in middle' },
                { word: 'guarantee', definition: 'promise of quality', hint: 'gu-ar' },
                { word: 'colleague', definition: 'coworker', hint: 'ea not ee' },
                { word: 'itinerary', definition: 'travel plan', hint: 'er-ary' },
                { word: 'personnel', definition: 'staff members', hint: 'double n' },
                { word: 'supersede', definition: 'to replace', hint: 'sede not cede' },
                { word: 'acquisition', definition: 'purchase or takeover', hint: 'qui in middle' },
                { word: 'bankruptcy', definition: 'financial failure', hint: 'rupt in middle' },
                { word: 'collateral', definition: 'security for loan', hint: 'double l, single t' },
                { word: 'depreciation', definition: 'decrease in value', hint: 'preci in middle' },
                { word: 'embezzlement', definition: 'theft of funds', hint: 'double z' },
                { word: 'franchise', definition: 'business license', hint: 'ch after n' },
                { word: 'grievance', definition: 'formal complaint', hint: 'ie after r' },
                { word: 'indemnity', definition: 'compensation for loss', hint: 'mn in middle' },
                { word: 'jurisdiction', definition: 'legal authority', hint: 'dict in middle' },
                { word: 'liquidation', definition: 'asset sale', hint: 'quid in middle' },
                { word: 'monopoly', definition: 'exclusive control', hint: 'poly ending' },
                { word: 'negligence', definition: 'failure to take care', hint: 'lig in middle' },
                { word: 'ordinance', definition: 'law or regulation', hint: 'ance ending' },
                { word: 'proprietary', definition: 'owned by someone', hint: 'ie after r' },
                { word: 'reconciliation', definition: 'making consistent', hint: 'cili in middle' }
            ],
            science: [
                { word: 'vacuum', definition: 'empty space', hint: 'double u' },
                { word: 'fluorescent', definition: 'glowing light type', hint: 'flu-or' },
                { word: 'chromosome', definition: 'genetic structure', hint: 'chr-omo' },
                { word: 'photosynthesis', definition: 'plant energy process', hint: 'photo-syn' },
                { word: 'parallel', definition: 'side by side lines', hint: 'double l' },
                { word: 'laboratory', definition: 'research facility', hint: 'or not er' },
                { word: 'temperature', definition: 'heat measurement', hint: 'per-a-ture' },
                { word: 'hypothesis', definition: 'proposed explanation', hint: 'hypo-thesis' },
                { word: 'equilibrium', definition: 'balanced state', hint: 'i-lib-ri' },
                { word: 'nucleus', definition: 'cell center', hint: 'nu-cle-us' },
                { word: 'algorithm', definition: 'step-by-step procedure', hint: 'rithm ending' },
                { word: 'biodiversity', definition: 'variety of life', hint: 'bio at start' },
                { word: 'catalyst', definition: 'speeds up reaction', hint: 'aly in middle' },
                { word: 'electromagnetic', definition: 'electric and magnetic', hint: 'gn in middle' },
                { word: 'fahrenheit', definition: 'temperature scale', hint: 'ahr after f' },
                { word: 'geosynchronous', definition: 'orbiting with Earth', hint: 'syn in middle' },
                { word: 'heterogeneous', definition: 'diverse in character', hint: 'eous ending' },
                { word: 'isotope', definition: 'atomic variant', hint: 'iso at start' },
                { word: 'kinetic', definition: 'relating to motion', hint: 'k at start' },
                { word: 'metamorphosis', definition: 'transformation', hint: 'morph in middle' },
                { word: 'oscillation', definition: 'back and forth movement', hint: 'double l' },
                { word: 'phosphorescent', definition: 'glowing in dark', hint: 'ph at start' },
                { word: 'quantum', definition: 'discrete amount', hint: 'ua in middle' },
                { word: 'respiratory', definition: 'breathing related', hint: 'pir in middle' },
                { word: 'seismograph', definition: 'earthquake recorder', hint: 'ei after s' }
            ]
        };

        // Sentence lists
        const sentenceLists = {
            easy: [
                { sentence: 'The cat sat on mat.', words: ['The', 'cat', 'sat', 'on', 'mat.'] },
                { sentence: 'I love to read books.', words: ['I', 'love', 'to', 'read', 'books.'] },
                { sentence: 'She runs in the park.', words: ['She', 'runs', 'in', 'the', 'park.'] },
                { sentence: 'We eat lunch at noon.', words: ['We', 'eat', 'lunch', 'at', 'noon.'] },
                { sentence: 'The sun is very bright.', words: ['The', 'sun', 'is', 'very', 'bright.'] },
                { sentence: 'Dogs like to play fetch.', words: ['Dogs', 'like', 'to', 'play', 'fetch.'] },
                { sentence: 'My friend lives next door.', words: ['My', 'friend', 'lives', 'next', 'door.'] },
                { sentence: 'The bird can fly high.', words: ['The', 'bird', 'can', 'fly', 'high.'] },
                { sentence: 'I drink water every day.', words: ['I', 'drink', 'water', 'every', 'day.'] },
                { sentence: 'They went to the store.', words: ['They', 'went', 'to', 'the', 'store.'] }
            ],
            medium: [
                { sentence: 'Please remember to bring your notebook.', words: ['Please', 'remember', 'to', 'bring', 'your', 'notebook.'] },
                { sentence: 'The beautiful garden has many flowers.', words: ['The', 'beautiful', 'garden', 'has', 'many', 'flowers.'] },
                { sentence: 'Yesterday we visited the science museum.', words: ['Yesterday', 'we', 'visited', 'the', 'science', 'museum.'] },
                { sentence: 'Learning languages requires daily practice time.', words: ['Learning', 'languages', 'requires', 'daily', 'practice', 'time.'] },
                { sentence: 'The committee will meet next Wednesday.', words: ['The', 'committee', 'will', 'meet', 'next', 'Wednesday.'] },
                { sentence: 'Exercise improves both physical and mental.', words: ['Exercise', 'improves', 'both', 'physical', 'and', 'mental.'] },
                { sentence: 'Technology changes how we communicate today.', words: ['Technology', 'changes', 'how', 'we', 'communicate', 'today.'] },
                { sentence: 'The restaurant serves delicious international cuisine.', words: ['The', 'restaurant', 'serves', 'delicious', 'international', 'cuisine.'] },
                { sentence: 'Success requires persistence and hard work.', words: ['Success', 'requires', 'persistence', 'and', 'hard', 'work.'] },
                { sentence: 'Weather forecasts help us plan ahead.', words: ['Weather', 'forecasts', 'help', 'us', 'plan', 'ahead.'] }
            ],
            hard: [
                { sentence: 'Entrepreneurs need perseverance to achieve success.', words: ['Entrepreneurs', 'need', 'perseverance', 'to', 'achieve', 'success.'] },
                { sentence: 'The government announced new environmental regulations.', words: ['The', 'government', 'announced', 'new', 'environmental', 'regulations.'] },
                { sentence: 'Pharmaceutical companies research breakthrough medical treatments.', words: ['Pharmaceutical', 'companies', 'research', 'breakthrough', 'medical', 'treatments.'] },
                { sentence: 'Miscellaneous expenses exceeded our quarterly budget.', words: ['Miscellaneous', 'expenses', 'exceeded', 'our', 'quarterly', 'budget.'] },
                { sentence: 'Contemporary architecture emphasizes sustainable building practices.', words: ['Contemporary', 'architecture', 'emphasizes', 'sustainable', 'building', 'practices.'] },
                { sentence: 'The psychiatrist recommended cognitive behavioral therapy.', words: ['The', 'psychiatrist', 'recommended', 'cognitive', 'behavioral', 'therapy.'] },
                { sentence: 'Reconnaissance missions gather crucial intelligence information.', words: ['Reconnaissance', 'missions', 'gather', 'crucial', 'intelligence', 'information.'] },
                { sentence: 'Fluorescent lighting reduces electricity consumption significantly.', words: ['Fluorescent', 'lighting', 'reduces', 'electricity', 'consumption', 'significantly.'] },
                { sentence: 'The millennium celebration was truly magnificent.', words: ['The', 'millennium', 'celebration', 'was', 'truly', 'magnificent.'] },
                { sentence: 'Conscientious students maintain excellent academic performance.', words: ['Conscientious', 'students', 'maintain', 'excellent', 'academic', 'performance.'] }
            ]
        };

        // State management
        let currentWord = null;
        let currentSentence = null;
        let currentMode = 'word';
        let currentCategory = null;
        let wordQueue = [];
        let skippedWords = [];
        let stats = {
            totalWords: 0,
            correctWords: 0,
            streak: 0,
            mastered: new Set(),
            lastPractice: null,
            wordHistory: {}
        };

        // Load stats from localStorage
        function loadStats() {
            const saved = localStorage.getItem('spellingStats');
            if (saved) {
                const parsed = JSON.parse(saved);
                stats = {
                    ...parsed,
                    mastered: new Set(parsed.mastered || []),
                    lastPractice: parsed.lastPractice ? new Date(parsed.lastPractice) : null
                };
                updateStatsDisplay();
            }
        }

        // Save stats to localStorage
        function saveStats() {
            const toSave = {
                ...stats,
                mastered: Array.from(stats.mastered),
                lastPractice: stats.lastPractice ? stats.lastPractice.toISOString() : null
            };
            localStorage.setItem('spellingStats', JSON.stringify(toSave));
        }

        // Update stats display
        function updateStatsDisplay() {
            document.getElementById('total-words').textContent = stats.totalWords;
            document.getElementById('accuracy').textContent = stats.totalWords > 0 
                ? Math.round((stats.correctWords / stats.totalWords) * 100) + '%' 
                : '0%';
            document.getElementById('streak').textContent = stats.streak;
            document.getElementById('mastered').textContent = stats.mastered.size;
        }

        // Set practice mode
        function setMode(mode) {
            currentMode = mode;
            document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            if (mode === 'word') {
                document.getElementById('word-mode-content').style.display = 'block';
                document.getElementById('sentence-mode-content').style.display = 'none';
                document.getElementById('spelling-input').classList.remove('sentence-input');
                document.getElementById('spelling-input').placeholder = 'Type the word here...';
            } else {
                document.getElementById('word-mode-content').style.display = 'none';
                document.getElementById('sentence-mode-content').style.display = 'block';
                document.getElementById('spelling-input').classList.add('sentence-input');
                document.getElementById('spelling-input').placeholder = 'Type the sentence here...';
            }
            
            document.getElementById('practice-area').style.display = 'none';
            currentWord = null;
            currentSentence = null;
        }

        // Tab switching
        function showSection(section) {
            document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            
            document.getElementById(section + '-section').classList.add('active');
            event.target.classList.add('active');
        }

        // Category selection
        function selectCategory(category) {
            currentCategory = category;
            document.querySelectorAll('.category-btn').forEach(btn => btn.classList.remove('selected'));
            event.target.classList.add('selected');
            
            wordQueue = getWordQueue(category);
            document.getElementById('practice-area').style.display = 'block';
            nextWord();
        }

        // Sentence level selection
        function selectSentenceLevel(level) {
            currentCategory = level;
            document.querySelectorAll('.category-btn').forEach(btn => btn.classList.remove('selected'));
            event.target.classList.add('selected');
            
            wordQueue = [...sentenceLists[level]];
            document.getElementById('practice-area').style.display = 'block';
            nextWord();
        }

        // Get word queue with spaced repetition
        function getWordQueue(category) {
            const words = [...wordLists[category]];
            
            return words.sort((a, b) => {
                const aErrors = stats.wordHistory[a.word]?.errors || 0;
                const bErrors = stats.wordHistory[b.word]?.errors || 0;
                return bErrors - aErrors;
            });
        }

        // Skip word
        function skipWord() {
            if (currentMode === 'word' && currentWord) {
                skippedWords.push(currentWord);
            } else if (currentMode === 'sentence' && currentSentence) {
                skippedWords.push(currentSentence);
            }
            nextWord();
        }

        // Daily challenge
        function startDailyChallenge() {
            const allWords = Object.values(wordLists).flat();
            wordQueue = [];
            
            for (let i = 0; i < 10; i++) {
                const randomIndex = Math.floor(Math.random() * allWords.length);
                wordQueue.push(allWords[randomIndex]);
            }
            
            currentMode = 'word';
            document.getElementById('practice-area').style.display = 'block';
            nextWord();
        }

        // Next word
        function nextWord() {
            // Check if we have skipped words to add back
            if (wordQueue.length === 0 && skippedWords.length > 0) {
                wordQueue = skippedWords;
                skippedWords = [];
            }
            
            if (wordQueue.length === 0) {
                if (currentCategory) {
                    if (currentMode === 'word') {
                        wordQueue = getWordQueue(currentCategory);
                    } else {
                        wordQueue = [...sentenceLists[currentCategory]];
                    }
                } else {
                    alert('Great job! You\'ve completed all words!');
                    return;
                }
            }
            
            if (currentMode === 'word') {
                currentWord = wordQueue.shift();
                currentSentence = null;
            } else {
                currentSentence = wordQueue.shift();
                currentWord = null;
            }
            
            document.getElementById('spelling-input').value = '';
            document.getElementById('feedback').innerHTML = '';
            document.getElementById('word-info').innerHTML = '';
            playWord();
        }

        // Play word audio
        function playWord() {
            const utterance = new SpeechSynthesisUtterance();
            const speed = document.getElementById('speed').value;
            utterance.rate = parseFloat(speed);
            
            if (currentMode === 'word' && currentWord) {
                utterance.text = currentWord.word;
            } else if (currentMode === 'sentence' && currentSentence) {
                utterance.text = currentSentence.sentence;
            }
            
            speechSynthesis.speak(utterance);
        }

        // Speed control
        document.getElementById('speed').addEventListener('input', function() {
            document.getElementById('speed-value').textContent = this.value + 'x';
        });

        // Create letter-by-letter comparison
        function createLetterComparison(input, correct) {
            let result = '';
            const inputLower = input.toLowerCase();
            const correctLower = correct.toLowerCase();
            
            for (let i = 0; i < Math.max(inputLower.length, correctLower.length); i++) {
                if (i >= inputLower.length) {
                    result += `<span class="letter-missing">${correct[i]}</span>`;
                } else if (i >= correctLower.length) {
                    result += `<span class="letter-incorrect">${input[i]}</span>`;
                } else if (inputLower[i] === correctLower[i]) {
                    result += `<span class="letter-correct">${input[i]}</span>`;
                } else {
                    result += `<span class="letter-incorrect">${input[i]}</span>`;
                }
            }
            
            return result;
        }

        // Check spelling
        function checkSpelling() {
            const input = document.getElementById('spelling-input').value.trim();
            if (!input) return;
            
            let correct = false;
            let correctAnswer = '';
            let hint = '';
            
            if (currentMode === 'word' && currentWord) {
                correctAnswer = currentWord.word;
                correct = input.toLowerCase() === correctAnswer.toLowerCase();
                hint = currentWord.hint;
            } else if (currentMode === 'sentence' && currentSentence) {
                correctAnswer = currentSentence.sentence;
                correct = input === correctAnswer;
                hint = `${currentSentence.words.length} words in the sentence`;
            }
            
            // Update stats
            stats.totalWords++;
            if (correct) {
                stats.correctWords++;
                stats.streak++;
                
                if (currentWord) {
                    if (!stats.wordHistory[currentWord.word]) {
                        stats.wordHistory[currentWord.word] = { attempts: 0, errors: 0 };
                    }
                    stats.wordHistory[currentWord.word].attempts++;
                    
                    if (stats.wordHistory[currentWord.word].attempts >= 3 && 
                        stats.wordHistory[currentWord.word].errors === 0) {
                        stats.mastered.add(currentWord.word);
                    }
                }
            } else {
                if (currentWord) {
                    if (!stats.wordHistory[currentWord.word]) {
                        stats.wordHistory[currentWord.word] = { attempts: 0, errors: 0 };
                    }
                    stats.wordHistory[currentWord.word].attempts++;
                    stats.wordHistory[currentWord.word].errors++;
                    
                    wordQueue.push(currentWord);
                } else if (currentSentence) {
                    wordQueue.push(currentSentence);
                }
            }
            
            stats.lastPractice = new Date();
            saveStats();
            updateStatsDisplay();
            
            // Show feedback
            const feedbackEl = document.getElementById('feedback');
            if (correct) {
                feedbackEl.className = 'feedback correct';
                feedbackEl.innerHTML = `<h3>‚úì Correct!</h3>`;
            } else {
                feedbackEl.className = 'feedback incorrect';
                feedbackEl.innerHTML = `
                    <h3>‚úó Not quite right</h3>
                    <p>You typed:</p>
                    <div class="letter-comparison">${createLetterComparison(input, correctAnswer)}</div>
                    <p>Correct spelling: <strong>${correctAnswer}</strong></p>
                    <p>Hint: ${hint}</p>
                `;
            }
            
            // Show word info
            if (currentWord) {
                document.getElementById('word-info').innerHTML = `
                    <div class="word-info">
                        <h4>${currentWord.word}</h4>
                        <p><strong>Definition:</strong> ${currentWord.definition}</p>
                        <p><strong>Example:</strong> ${getExampleSentence(currentWord.word)}</p>
                    </div>
                `;
            }
            
            // Next word after delay
            setTimeout(() => {
                if (correct) {
                    nextWord();
                }
            }, correct ? 2000 : 4000);
        }

        // Get example sentence
        function getExampleSentence(word) {
            const examples = {
                'necessary': 'It is necessary to practice spelling regularly.',
                'accommodate': 'The hotel can accommodate up to 200 guests.',
                'embarrass': 'I didn\'t mean to embarrass you in front of everyone.',
                'occurrence': 'This is a rare occurrence in our field.',
                'definitely': 'I will definitely be there on time.',
                'separate': 'Please separate the recyclables from the trash.',
                'believe': 'I believe you can master these words.',
                'receive': 'Did you receive my email yesterday?',
                'weird': 'That\'s a weird coincidence!',
                'calendar': 'Mark the date on your calendar.'
            };
            
            return examples[word.toLowerCase()] || `The word "${word}" is commonly used in English.`;
        }

        // Custom word list
        function saveCustomList() {
            const customText = document.getElementById('custom-words').value.trim();
            if (!customText) {
                alert('Please enter some words first!');
                return;
            }
            
            const customWords = customText.split('\n')
                .map(w => w.trim())
                .filter(w => w.length > 0)
                .map(w => ({
                    word: w,
                    definition: 'Custom word',
                    hint: `${w.length} letters`
                }));
            
            if (customWords.length === 0) {
                alert('Please enter valid words!');
                return;
            }
            
            wordLists.custom = customWords;
            
            currentCategory = 'custom';
            currentMode = 'word';
            wordQueue = customWords;
            showSection('practice');
            document.getElementById('practice-area').style.display = 'block';
            nextWord();
        }

        // Initialize
        loadStats();
    </script>
</body>
</html>